# 语音智能多功能坦克车系统（树莓派）

本项目为浙江工业大学计算机工程实践课程作品，基于树莓派实现全流程语音控制的多功能坦克履带车，集成了避障、循迹、AI对话、图像/手势/二维码识别、天气查询、邮件报警等多种智能功能。

---

## 目录结构与主要模块

- `main.py`：主程序入口，负责语音录制、指令识别、分发与AI对话。
- `voice_system.py`：语音录制、识别、指令处理与AI问答核心。
- `voice_synthesis.py`：百度云语音合成与本地MP3播放。
- `car_control.py`：底盘运动控制（前进、后退、转向、跳舞等）。
- `avoid.py`：超声波避障，支持语音中断。
- `track.py`：红外循迹，支持语音中断。
- `face_sample.py`：人脸检测与邮件报警，支持语音中断。
- `mail_send.py`：邮件发送（含图片）。
- `get_weather.py`：杭州天气爬虫查询与播报。
- `qrcode_read.py`：摄像头二维码识别。
- `gesture_recognition.py`：摄像头手势识别（百度云API）。
- `image_recognition.py`：摄像头图像识别（百度云API）。
- `led_servo_control.py`：七彩LED与舵机控制。
- `img/`：存放拍摄图片。
- `voice_recognition/`、`voice_synthesis/`：语音识别与合成缓存目录。

---

## 主要功能与指令一览

| 指令/功能           | 描述                                                         |
|--------------------|--------------------------------------------------------------|
| 向前/后/左/右移动   | 基础动作，控制小车运动                                       |
| 原地左/右转         | 原地旋转                                                     |
| 立即停止           | 停止运动                                                     |
| 沿着黑线走         | 红外循迹，语音“中断”可退出                                   |
| 避开障碍物         | 超声波避障，语音“中断”可退出                                 |
| 跳舞               | 小车跳舞，配合LED与舵机动作                                  |
| 查询今日天气       | 爬虫获取杭州天气，语音播报                                   |
| 跟踪敌人           | 人脸检测，抓拍并邮件报警，语音“中断”可退出                   |
| 启动二维码识别     | 摄像头识别二维码，解码内容                                   |
| 启动手势识别       | 摄像头识别手势，识别到“六”退出                               |
| 启动图像识别       | 摄像头拍照并识别物体                                         |
| 给大家打个招呼     | LED灯光秀+语音                                               |
| 小车+任意问题      | 通义千问大模型AI对话，语音播报                               |

---

## 使用方法

1. **硬件准备**：树莓派、麦克风、音响、摄像头、超声波/红外模块、LED、舵机等。
2. **环境依赖**：
   - Python 3.x
   - `pip install baidu-aip chardet python-dotenv beautifulsoup4 pyzbar demjson3 opencv-python numpy pillow requests`
   - 录音/播音工具：`sudo apt install alsa-utils libasound2-dev mpg123`
3. **环境变量**：需配置百度云、通义千问、邮箱等API密钥，详见`.env`文件。
4. **运行主程序**：
   ```sh
   python3 main.py
   ```
   按提示说出指令，小车将自动执行。

---

## 模块扩展说明

- **本地指令扩展**：新增指令时，编写对应Python模块并在`main.py`注册。
- **AI对话**：以“小车”开头的语音将由通义千问大模型处理。
- **多线程中断**：避障、循迹、人脸跟踪等均支持语音“中断”打断任务。
- **图像/手势/二维码识别**：均基于摄像头，需硬件支持。
- **LED与舵机**：可自定义灯光与动作秀。

---

## 注意事项

- 目录会自动创建，如遇缺失请手动补齐。
- 语音识别/合成/AI接口需联网。
- 部分功能需在树莓派物理环境下测试。
- `time.sleep()`用于音频播放与动作节奏控制。
- 建议定期清理缓存与日志，避免存储爆满。

---

## 致谢

感谢所有开源库与API服务的支持。欢迎二次开发与交流！
