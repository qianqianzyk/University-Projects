# 汇编语言与微机接口实验

本仓库包含了《汇编语言与微机接口》课程的完整实验代码

## 仓库目录结构

```
汇编语言与微机接口实验/
├── 实验/
│   ├── 汇编/               # 8086 汇编语言程序设计 (10个实验)
│   ├── 定时器/             # 8254 可编程定时/计数器应用 (2个实验)
│   └── 中断/               # 8259 可编程中断控制器应用 (3个实验)
├── 工具包/                 # 实验所需的 DOS 环境与编译工具
│   ├── DOSBox-0.74.zip     # 16位 DOS 模拟器
│   └── masm.zip            # MASM 5.0 汇编器与连接器 (MASM.EXE, LINK.EXE 等)
└── README.md               # 项目总说明文档
```

## 实验模块详解

本仓库包含三个主要实验模块，每个模块下均有独立的详细 `README.md` 文档

### 1. 汇编语言基础实验 (`实验/汇编/`)

该模块包含 10 个循序渐进的实验，涵盖了汇编语言的核心编程技术

- **内容覆盖**：DOS 系统调用、分支与循环程序设计、数组处理、字符串操作、逻辑运算及输入输出控制
- **典型实验**：
  - 大小写字符转换与菜单设计
  - 数组极值查找与交集求解
  - 复杂的多重校验数值求和
  - 二进制/十六进制数值转换与显示
- **详细文档**：请阅读 `实验/汇编/README.md`

### 2. 8254 定时/计数器实验 (`实验/定时器/`)

该模块专注于 Intel 8254 芯片的编程与应用

- **内容覆盖**：8254 的控制字设置、计数模式（Mode 0）与方波发生模式（Mode 3）的应用
- **实验项目**：
  - **事件计数器**：利用计数中断功能统计外部脉冲
  - **方波发生器**：利用级联技术（Counter 0 + Counter 1）产生 1Hz 低频方波
- **详细文档**：请阅读 `实验/定时器/README.md`

### 3. 8259 中断控制器实验 (`实验/中断/`)

该模块专注于 Intel 8259A 芯片的中断控制技术

- **内容覆盖**：中断向量表修改、ICW/OCW 初始化命令字设置、中断屏蔽与优先级控制
- **实验项目**：
  - **单级中断**：IRQ7 外部中断响应
  - **优先级嵌套**：验证 IRQ6 与 IRQ7 的优先级关系
  - **级联中断**：主片与从片级联系统的初始化与中断处理
- **详细文档**：请阅读 `实验/中断/README.md`

## 开发环境与工具使用

本项目代码基于 **16位实模式**，需要运行在 DOS 环境下。仓库的 `工具包/` 目录中已提供了所需软件

### 1. 环境准备

1. 解压 `工具包/DOSBox-0.74.zip` 并安装/运行 **DOSBox**
2. 解压 `工具包/masm.zip`，将解压后的文件夹（包含 `MASM.EXE`, `LINK.EXE` 等）放置在一个方便的路径下（例如 `D:\MASM`）

### 2. 编译与运行步骤

假设你将本仓库下载到了 `D:\Labs`，且 MASM 工具在 `D:\MASM`。

1. **启动 DOSBox**。

2. **挂载目录**（将本地磁盘映射为 DOSBox 的 C 盘）：

   ```
   Z:\> mount c d:\
   Z:\> c:
   ```

3. **配置环境变量**（将 MASM 工具加入 PATH，方便直接调用）：

   ```
   C:\> set PATH=%PATH%;\MASM
   ```

4. **编译与运行**（以 `exp1` 为例）： 进入代码目录：

   ```
   C:\> cd Labs\实验\汇编\exp1
   ```

   **编译 (Compile)**：生成 `.OBJ` 目标文件

   ```
   C:\Labs\实验\汇编\exp1> masm CODE.ASM;
   ```

   **连接 (Link)**：生成 `.EXE` 可执行文件

   ```
   C:\Labs\实验\汇编\exp1> link CODE.OBJ;
   ```

   **运行 (Run)**：

   ```
   C:\Labs\实验\汇编\exp1> CODE.EXE
   ```

### 3. 调试 (Debug)

如果程序运行结果不符合预期，可以使用 `DEBUG.COM` 进行单步跟踪：

```
C:\Labs\实验\汇编\exp1> debug CODE.EXE
- u     ; 反汇编查看代码
- t     ; 单步执行
- g     ; 运行到断点
- d     ; 查看内存数据
- q     ; 退出
```